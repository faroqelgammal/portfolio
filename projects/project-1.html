<!-- 
🟢 تعليق التعديلات الأخيرة:
- تم استبدال منطق الزوم والتحريك القديم بمنطق جديد أكثر سلاسة ومرونة (Pan & Zoom Logic).
- تم استخدام تقنية 'translate3d' لتحريك الصورة المكبرة، مما يوفر أداءً أفضل على الأجهزة المختلفة.
- تم تحديث CSS لتهيئة الصورة لاستقبال التحويلات (transforms).
-->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 🟢 التعديل 1: عنوان الصفحة الذي يظهر في المتصفح -->
    <title>
	تفاصيل المشروع: تصميم و تنفيذ المبني الاداري لمقر قاصد خير 
	</title>
    <!-- استخدام نفس مكتبة الأيقونات (Remixicon) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
        /* ==================== CUSTOM CSS VARIABLES (Provided by user) ==================== */
        :root {
            --header-height: 3.5rem;
            --hue: 180; /* اللون الأساسي: مائل للأزرق/أخضر */
            --first-color: hsl(var(--hue), 100%, 40%);
            --first-color-alt: hsl(var(--hue), 56%, 35%);
            --title-color: hsl(228, 8%, 95%);
            --text-color: hsl(228, 8%, 65%);
            --body-color: hsl(228, 15%, 20%);
            --container-color: hsl(228, 15%, 15%); /* ستستخدم لخلفية البطاقات */
            --white-color: #ffffff; /* لون أبيض مخصص */

            /*========== Font and typography ==========*/
            --body-font: "Poppins", sans-serif;
            --h1-font-size: 1.5rem;
            --h2-font-size: 1.25rem;
            --normal-font-size: .938rem;
            --small-font-size: .813rem;

            /*========== Font weight ==========*/
            --font-regular: 400;
            --font-medium: 500;
            --font-semi-bold: 600;
            --transition: .4s;
        }

        /*========== Responsive typography ==========*/
        @media screen and (min-width: 1152px) {
            :root {
                --h1-font-size: 2.25rem;
                --h2-font-size: 1.5rem;
                --normal-font-size: 1rem;
                --small-font-size: .875rem;
            }
        }
        
        /*=============== BASE (Provided by user) ===============*/
        * {
            box-sizing: border-box;
            padding: 0;
            margin: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        input, textarea, button, body {
            font-family: var(--body-font);
            font-size: var(--normal-font-size);
        }

        body {
            background-color: var(--body-color);
            color: var(--text-color);
        }

        h1, h2, h3, h4 {
            color: var(--title-color);
            font-weight: var(--font-medium);
        }

        a {
            text-decoration: none;
            color: var(--text-color);
        }

        /*=============== REUSABLE CSS CLASSES (Provided by user) ===============*/
        .container {
            max-width: 1120px;
            margin-inline: 1.5rem;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .section {
            padding-block: 5rem 2rem;
        }
        
        .main {
            overflow: hidden; 
        }

        /* ==================== HEADER STYLES ==================== */
        .header {
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            background-color: var(--body-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .nav {
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* تم تغيير اللون إلى الأبيض (--title-color) والاسم إلى Faroq Elgammal */
        .nav__logo {
            color: var(--title-color); 
            font-size: var(--h2-font-size);
            font-weight: var(--font-semi-bold);
            transition: color var(--transition);
        }

        /* زر العودة للمشاريع في الهيدر */
        .nav__back-button {
            display: inline-flex;
            align-items: center;
            padding: 0.75rem 1.25rem;
            background-color: var(--container-color);
            color: var(--first-color);
            border-radius: 0.5rem;
            font-weight: var(--font-semi-bold);
            transition: background-color var(--transition), color var(--transition);
            font-size: var(--normal-font-size);
        }
        
        .nav__back-button:hover {
            background-color: var(--first-color);
            color: var(--body-color);
        }
        
        .nav__back-button i {
            font-size: 1.25rem;
            margin-left: 0.5rem;
            transform: scaleX(-1); /* لقلب الأيقونة في وضع RTL */
        }


        /* ==================== PROJECT DETAIL STYLES ==================== */
        
        .project__header {
            padding-top: var(--header-height); /* لإزاحة المحتوى من أسفل الهيدر الثابت */
        }

        .project__header h1 {
            color: var(--title-color);
            font-size: var(--h1-font-size);
            margin-bottom: 1rem;
        }
        
        .project__header span {
            display: block;
            color: var(--first-color);
            font-weight: var(--font-semi-bold);
            margin-bottom: 0.5rem;
            font-size: var(--normal-font-size);
        }
        
        .project__header p {
            color: var(--text-color);
            max-width: 900px;
            font-size: var(--normal-font-size);
        }

        /* معلومات المشروع الرئيسية (البطاقات) */
        .info__grid {
            /* القيمة الافتراضية مرنة ولكن يتم تعديلها في الـ media queries */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 1.5rem;
            margin-top: 3rem;
            margin-bottom: 4rem;
        }
        
        .info__card {
            background-color: var(--container-color);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform var(--transition);
        }
        
        .info__card:hover {
            transform: translateY(-5px);
        }
        
        .info__card i {
            color: var(--first-color);
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .info__card h3 {
            color: var(--title-color);
            font-size: var(--h2-font-size);
            margin-bottom: 0.25rem;
        }

        /* الوصف التفصيلي والحلول */
        .details__content h2 {
            font-size: var(--h2-font-size);
            border-bottom: 2px solid var(--container-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .details__text p {
            margin-bottom: 1.5rem;
            font-size: var(--normal-font-size);
        }
        
        /* تم تفتيح لون الخلفية لضمان تباين أفضل */
        .details__highlight {
            background-color: hsl(228, 15%, 28%); /* لون أفتح قليلاً من --body-color */
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
        }
        
        .details__highlight h3 {
            color: var(--title-color);
            font-size: var(--h2-font-size);
            margin-bottom: 0.75rem;
        }
        
        /* ==================== AI ASSISTANT STYLES ==================== */
        .ai__assistant {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--container-color);
        }
        .ai__assistant h3 {
            color: var(--first-color);
            margin-bottom: 0.5rem;
        }
        .ai__assistant p {
            margin-bottom: 1rem;
        }
        /* الزر: خلفية باللون الأساسي، نص وأيقونة باللون الأبيض */
        .ai__button {
            display: inline-flex;
            align-items: center;
            padding: 1rem 1.5rem;
            background-color: var(--first-color); /* اللون الأساسي */
            color: var(--white-color); /* لون النص أبيض */
            border-radius: 0.5rem;
            font-weight: var(--font-semi-bold);
            cursor: pointer;
            transition: background-color var(--transition);
            border: none;
            font-size: var(--normal-font-size);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .ai__button:hover {
            background-color: var(--first-color-alt); /* لون أغمق عند التحويم */
        }
        .ai__button:disabled {
            background-color: var(--text-color);
            cursor: not-allowed;
            opacity: 0.6;
            color: var(--title-color);
        }
        .ai__button i {
            margin-left: 0.5rem;
            font-size: 1.25rem;
            color: var(--white-color); /* الأيقونة بيضاء أيضاً */
        }
        
        .ai__output {
            margin-top: 1.5rem;
            background-color: var(--container-color);
            padding: 1.5rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
            color: var(--text-color);
            line-height: 1.6;
            transition: all var(--transition); /* إضافة انتقال سلس */
        }

        /* حالة الإخراج الفارغ: إزالة الخلفية والحدود والـ padding */
        .ai__output.empty {
            min-height: 0;
            padding: 0;
            margin-top: 0;
            background-color: transparent;
            border: none;
            box-shadow: none;
        }

        .ai__output h4 {
            color: var(--title-color);
            margin-bottom: 0.75rem;
            font-size: var(--normal-font-size);
        }
        .ai__output ul {
            list-style: disc;
            margin-right: 1.5rem;
            padding-right: 0.5rem;
        }
        .ai__output li {
            margin-bottom: 0.75rem;
        }
        .loading__message {
            color: var(--first-color);
            font-style: italic;
        }
        /* ==================== END AI ASSISTANT STYLES ==================== */


        /* معرض الصور */
        .gallery__grid {
            /* القيمة الافتراضية مرنة ولكن يتم تعديلها في الـ media queries */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .gallery__item {
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform var(--transition);
        }

        .gallery__item:hover {
            transform: scale(1.05);
        }
        
        .gallery__item img {
			width: 100%;
			height: auto;
			max-height: 350px; /* يحد أقصى للارتفاع */
			object-fit: cover;
			display: block;
			border-radius: 0.75rem 0.75rem 0 0;
		}

        
        .gallery__caption {
            background-color: var(--container-color);
            padding: 0.75rem;
            text-align: center;
            font-size: var(--small-font-size);
        }

/* ====== NEW MODAL STYLES (Lightbox) ====== */
.image-modal {
    display: none; 
    position: fixed;
    z-index: 1000;
    padding-top: 60px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; /* مهم: هذا هو "إطار" الرؤية الذي يحيط بالصورة المتحركة */
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    
    /* لتمكين السحب بشكل أفضل على اللمس */
    touch-action: none; 
}

.modal__content {
    margin: auto;
    display: block;
    width: 90%;
    max-width: 900px;
    height: 100%; /* يجب أن تأخذ الارتفاع الكامل للعرض الأولي */
    max-height: 80vh; 
    object-fit: contain;
    border-radius: 0.75rem;
    animation-name: zoom;
    animation-duration: 0.6s;
    
    /* 🛠️ إعدادات التحويل الجديدة */
    position: absolute; /* مهم للتحريك بواسطة translate */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
    transform-origin: 50% 50%; 
    transition: transform 0.1s ease-out; /* حركة سريعة جداً للزوم، والتحريك يحدث فوراً */
}

/* 🛠️ تغيير المؤشر عند السحب/التحريك */
.modal__content.dragging {
    cursor: grabbing !important;
}
.modal__content[style*="scale(1)"] {
    cursor: zoom-in; /* مؤشر تكبير عند الوضع الطبيعي */
}
.modal__content:not([style*="scale(1)"]) {
    cursor: grab; /* مؤشر سحب عند التكبير */
}


.modal__caption {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
    text-align: center;
    color: var(--white-color);
    padding: 10px 0;
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1001; /* فوق كل شيء */
}

/* 🛠️ زر التحكم بالزوم */
.zoom-controls {
    position: absolute;
    top: -50px; /* أعلى من التسمية */
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 5px 15px;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.zoom-controls button {
    background: none;
    border: none;
    color: var(--white-color);
    font-size: 1.25rem;
    cursor: pointer;
    transition: color 0.2s;
}
.zoom-controls button:hover {
    color: var(--first-color);
}
.zoom-controls button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}


/* زر الإغلاق */
.modal__close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
    z-index: 1002;
}

.modal__close:hover,
.modal__close:focus {
    color: var(--first-color);
    text-decoration: none;
    cursor: pointer;
}

@keyframes zoom {
    from {transform: scale(0)} 
    to {transform: scale(1)}
}

/* ضبط ظهور المحتوى في الشاشات الصغيرة */
@media screen and (max-width: 768px) {
    .modal__content {
        width: 95%;
    }
    .modal__close {
         top: 10px;
         right: 20px;
         font-size: 30px;
    }
    .modal__caption {
        bottom: 10px;
    }
}
/* ====== END NEW MODAL STYLES ====== */

        /* قسم التحميلات */
        .downloads__list {
            margin-top: 1.5rem;
            padding: 0;
            list-style: none;
        }
        
        .download__item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--container-color);
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            transition: background-color var(--transition);
        }
        
        .download__item:hover {
            background-color: hsl(228, 15%, 25%); /* أغمق قليلاً من container-color */
        }

        .download__info {
            display: flex;
            align-items: center;
        }

        .download__info i {
            font-size: 2rem;
            margin-left: 1rem;
        }
        
        .download__info .text-pdf { color: #e74c3c; } /* أحمر لملفات PDF */
        .download__info .text-dwg { color: var(--first-color); } /* اللون الأساسي للملفات الأخرى */

        .download__title {
            font-weight: var(--font-semi-bold);
            color: var(--title-color);
        }
        
        .download__meta {
            font-size: var(--small-font-size);
            color: var(--text-color);
        }

        .download__button {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: var(--first-color);
            color: var(--body-color); /* لون النص يصبح غامقًا */
            border-radius: 2rem;
            font-weight: var(--font-semi-bold);
            transition: background-color var(--transition);
            font-size: var(--small-font-size);
        }
        
        .download__button:hover {
            background-color: var(--first-color-alt);
        }
        
        .download__button i {
            margin-left: 0.5rem;
            transform: scaleX(-1); /* لقلب الأيقونة في وضع RTL */
        }
        
        /* ==================== FOOTER STYLES ==================== */
        .footer {
            background-color: var(--container-color);
            padding: 2rem 0;
            text-align: center;
            color: var(--text-color);
            margin-top: 3rem;
            font-size: var(--small-font-size);
        }

        /* =============== BREAKPOINTS =============== */
        
        /* For very small screens (mobile < 576px) */
        @media screen and (max-width: 575px) {
            /* general container spacing */
            .container {
                margin-inline: 1rem;
            }

            /* Grids stack vertically for best readability on small phones */
            .info__grid,
            .gallery__grid {
                grid-template-columns: 1fr;
            }

            /* Adjust spacing/padding for smaller touch targets */
            .nav__back-button {
                padding: 0.5rem 0.8rem;
                font-size: var(--small-font-size);
            }

            .ai__button {
                padding: 0.75rem 1rem;
            }
        }

        /* For tablets and up (≥768px) */
        @media screen and (min-width: 768px) {
            /* Info cards show 3 columns for better use of horizontal space */
            .info__grid {
                grid-template-columns: repeat(3, 1fr); 
            }

            /* Gallery shows 2 columns */
            .gallery__grid {
                grid-template-columns: repeat(2, 1fr); 
            }

            .project__header h1 {
                font-size: 2rem;
            }
        }

        /* For large devices (≥1152px) */
        @media screen and (min-width: 1152px) {
            .container {
                margin-inline: auto; /* Center the container on large screens */
            }
            
            /* Gallery expands to 3 columns on the largest screens */
            .gallery__grid {
                grid-template-columns: repeat(3, 1fr); 
            }
        }

    </style>
</head>

<body>
		<!-- MODAL: Lightbox for image preview (جديد) -->
		<div class="image-modal" id="image-modal">
            <!-- زر الإغلاق -->
			<span class="modal__close" id="modal-close">&times;</span>
            
            <!-- الصورة التي سيتم عرضها -->
			<img class="modal__content" id="modal-image" alt="Image Preview">
            
            <!-- الشرح أسفل الصورة وداخلها سيكون زر التحكم بالزوم -->
			<div class="modal__caption" id="modal-caption">
                <!-- 🛠️ عناصر التحكم بالزوم -->
                <div class="zoom-controls">
                    <button id="zoom-in-btn" title="تكبير (+)">
                        <i class="ri-zoom-in-line"></i>
                    </button>
                    <button id="zoom-out-btn" title="تصغير (-)" disabled>
                        <i class="ri-zoom-out-line"></i>
                    </button>
                    <button id="reset-btn" title="إعادة تعيين">
                        <i class="ri-refresh-line"></i>
                    </button>
                </div>
            </div>
		</div>
    <!-- ==================== HEADER / NAVIGATION ==================== -->
    <header class="header">
        <nav class="nav container">
            <!-- 🟢 التعديل 2: اسم المالك/المحفظة -->
            <a href="../index.html" class="nav__logo">
                Faroq Elgammal
            </a>
            
            <!-- زر العودة للمشاريع (لا يحتاج تعديل) -->
            <a href="../index.html#projects" class="nav__back-button">
                <i class="ri-arrow-right-line"></i>
                العودة للمشاريع
            </a>
        </nav>
    </header>

    <!-- ==================== MAIN PROJECT DETAILS ==================== -->
    <main class="main section">
        <div class="container">
        
            <!-- عنوان المشروع ونبذة مختصرة -->
            <section class="project__header">
                <!-- 🟢 التعديل 3: مجال المشروع (مثلاً: الهندسة الكهربائية، الميكانيكا، البرمجة) -->
                <span>الهندسة الكهربائية - MEP</span>
                <!-- 🟢 التعديل 4: عنوان المشروع الرئيسي -->
                <h1>تصميم وتنفيذ المبنى الإداري لمقر قاصد خير</h1>
                <!-- 🟢 التعديل 5: نبذة قصيرة جداً عن المشروع (Paragraph) -->
                <p>
هذا المشروع يهدف إلى تطوير مبنى إداري متكامل يضم ثمانية طوابق بالإضافة إلى منطقة لاندسكيب خارجية.
تم تنفيذ المشروع مع التركيز على تحقيق أعلى معايير الأمان والكفاءة التشغيلية، مع الحفاظ على الجمال البصري في توزيع الإضاءة والأنظمة الكهربائية.
                </p>
            </section>

            <!-- معلومات المشروع الرئيسية (بطاقات) -->
            <section class="info__grid grid"> 
                
                <!-- 🟢 التعديل 6: بطاقة تاريخ الإنجاز -->
                <div class="info__card">
                    <i class="ri-calendar-line"></i>
                    <h3>تاريخ الإنجاز</h3>
                    <p>أغسطس 2025</p>
                </div>
                
                <!-- 🟢 التعديل 7: بطاقة نوع المبنى/العميل/الهدف -->
                <div class="info__card">
                    <i class="ri-building-line"></i>
                    <h3>نوع المبنى</h3>
                    <p>مبنى إداري (8 طوابق + لاندسكيب) – المساحة الكلية: 1250 م²</p>
                </div>
                
                <!-- 🟢 التعديل 8: بطاقة الأدوات/التقنيات المستخدمة -->
                <div class="info__card">
                    <i class="ri-tools-line"></i>
                    <h3>الأدوات المستخدمة</h3>
                    <p>AutoCAD, Dialux Evo, MS Excel</p>
                </div>
            </section>

            <!-- الوصف التفصيلي والحلول -->
            <section class="details__content section">
                <h2>
				نطاق العمل الكهربائي
				</h2>
                
                <div class="details__text">
                    <!-- 🟢 التعديل 9: الفقرة الأولى من التفاصيل -->
                     <ul>
						تم تنفيذ تصميم وتشغيل الأنظمة التالية:

						<li>نظام القوى الكهربائية (Power)

						<li>نظام الإنارة (Lighting)

						<li>نظام إنذار الحريق (Fire Alarm)

						<li>نظام البيانات (Data)

						<li>نظام المراقبة بالكاميرات (CCTV)

						<li>نظام الصوت (Sound System)

						<li>نظام التحكم في الدخول (Access Control)

						<li>نظام التأريض والمانعة الصواعق (Earthing & Lightning Protection)
                     </ul>
                    
                    <!-- 🟢 التعديل 10: قسم مميز (Highlight) للحلول الرئيسية -->
                    <div class="details__highlight">
                        <h3>
						تفاصيل التصميم والحلول
						</h3>
                        <p>
                            تم تحقيق كفاءة إنارة عالية مع توزيع جمالي يناسب الطابع الإداري للمبنى، باستخدام برامج Dialux Evo لتوزيع مستويات الإضاءة بدقة.
							كما تم إعداد Panel Schedule و Single Line Diagram من الصفر، مع تصميم لوحتين إنارة بالكامل للطابقين الرابع والسادس.

							ركزنا كذلك على اختيار الموصلات وواقيات التيار المناسبة وفقًا لمعايير NEC/IEC، لضمان التشغيل الآمن والمستقر لجميع الأنظمة.
                        </p>
                    </div>
                    
                    <!-- 🟢 التعديل 11: الفقرة الختامية للتفاصيل -->
					    <h3>
						التنسيق بين الأنظمة (Coordination)
						</h3>
                    <p>
						تم التنسيق الكامل بين الأنظمة الكهربائية والميكانيكية والمعمارية لتحقيق تكامل بصري ووظيفي داخل جميع الطوابق.
                    </p>
                </div>
                
                <!-- هذا الجزء خاص بمساعد Gemini API، تم تعديل النص ليصبح تحليلاً عاماً -->
                <div class="ai__assistant">
                    <h3>مساعد المشروع الذكي (Gemini API)</h3>
                    <!-- النص الجديد يصف التحليل العام -->
                    <p>استخدم الذكاء الاصطناعي لتحليل المشروع وتقديم نظرة عامة وتقييم فني مفصل.</p>
                    <button class="ai__button" id="generate-analysis">
                        <i class="ri-lightbulb-flash-line"></i>
                        تقييم وتحليل المشروع
                    </button>
                    <div id="ai-output" class="ai__output empty" hidden>
                        <p id="output-text"></p>
                    </div>
                </div>
                <!-- ==================== END GEMINI AI ASSISTANT FEATURE ==================== -->

            </section>

            <!-- معرض الصور (Gallery) -->
            <section class="gallery__content section">
                <h2>معرض الصور والمخططات</h2>
                <div class="gallery__grid grid">
                    
                    <!-- 🟢 التعديل 12: صورة / مخطط 1. قم بتغيير النص في placehold.co -->
                    <div class="gallery__item">
                        <img src="project1/0.jpg" alt="لوحة رقم 0" loading="lazy">
                        <div class="gallery__caption">لوحة البدروم</div>
                    </div>
                    
					<div class="gallery__item">
                        <img src="project1/1.jpg" alt="لوحة رقم 1" loading="lazy"> 
                        <div class="gallery__caption">لوحة الأرضي المرتفع</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/2.jpg" alt="لوحة رقم 2" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور الأول</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/3.jpg" alt="لوحة رقم 3" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور الثاني</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/4.jpg" alt="لوحة رقم 4" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور الثالث</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/5.jpg" alt="لوحة رقم 5" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور الرابع</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/6.jpg" alt="لوحة رقم 6" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور الخامس</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/7.jpg" alt="لوحة رقم 7" loading="lazy"> 
                        <div class="gallery__caption">لوحة الدور السادس</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-PO-208.jpg" alt="لوحة باور" loading="lazy"> 
                        <div class="gallery__caption">لوحة باور</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-PM-208.jpg" alt="لوحة التكييف" loading="lazy"> 
                        <div class="gallery__caption">لوحة التكييف</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-LC-306.jpg" alt="لوحة التيار الخفيف" loading="lazy"> 
                        <div class="gallery__caption">لوحة التيار الخفيف</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-LC-CCTV-306.jpg" alt="لوحة الكاميرات" loading="lazy"> 
                        <div class="gallery__caption">لوحة الكاميرات</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-LI-106.jpg" alt="لوحة الإنارة" loading="lazy"> 
                        <div class="gallery__caption">لوحة الإنارة</div>  
                    </div>

					<div class="gallery__item">
                        <img src="project1/EL-FA-406.jpg" alt="لوحة إنذار الحريق" loading="lazy"> 
                        <div class="gallery__caption">لوحة إنذار الحريق</div>  
                    </div>



					<div class="gallery__item">
                        <img src="project1/22.png" alt="لوحة الواجهة اليمني" loading="lazy"> 
                        <div class="gallery__caption">لوحة الواجهة اليمني</div> 
                    </div>

					<div class="gallery__item">
                        <img src="project1/33.png" alt="لوحة الواجهة اليسري" loading="lazy"> 
                        <div class="gallery__caption">لوحة الواجهة اليسري</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/11.png" alt="لوحة الواجهة الأمامية" loading="lazy"> 
                        <div class="gallery__caption">لوحة الواجهة الأمامية</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/44.png" alt="لوحة الواجهة الخلفية" loading="lazy"> 
                        <div class="gallery__caption">لوحة الواجهة الخلفية</div> 
                    </div>
					
					<div class="gallery__item">
                        <img src="project1/EL-SLD-ALEX-01.jpg" alt="SLD" loading="lazy">  
                        <div class="gallery__caption">SLD</div>  
                    </div>

					<div class="gallery__item">
                        <img src="project1/DP-FO.jpg" alt=" panel scadual" loading="lazy">  
                        <div class="gallery__caption"> panel scadual</div>  
                    </div>

                </div>
            </section>
        
            <!-- قسم التحميلات (Downloadable Files) -->
            <section class="downloads__content section" style="display: none;">
                <!-- 🟢 التعديل 18: تغيير عنوان القسم إلى "ملفات المشروع" -->
                <h2>ملفات المشروع</h2> 
                <div class="downloads__list">
                    
                    <!-- 🟢 التعديل 15: ملف التحميل الأول -->
                    <div class="download__item">
                        <div class="download__info">
                            <!-- يمكنك تغيير الأيقونة (مثل ri-file-excel-line) وكلاس اللون (مثل text-pdf) -->
                            <i class="ri-file-pdf-line text-pdf"></i> 
                            <div>
                                <p class="download__title">تقرير حسابات الأحمال الكهربائية</p>
                                <span class="download__meta">ملف PDF - 2.5MB</span>
                            </div>
                        </div>
                        <!-- قم بتغيير اسم الملف الذي سيتم تحميله في download="xxx" -->
                        <a href="#" download="Load_Calculation_Report.pdf" class="download__button">
                            <i class="ri-download-line"></i>
                            تحميل
                        </a>
                    </div>

                    <!-- 🟢 التعديل 16: ملف التحميل الثاني -->
                    <div class="download__item">
                        <div class="download__info">
                            <i class="ri-layout-line text-dwg"></i>
                            <div>
                                <p class="download__title">لوحات الشوب دروينغ (DWG)</p>
                                <span class="download__meta">ملف مضغوط ZIP - 18MB</span>
                            </div>
                        </div>
                        <!-- قم بتغيير اسم الملف الذي سيتم تحميله في download="xxx" -->
                        <a href="#" download="Shop_Drawings.zip" class="download__button">
                            <i class="ri-download-line"></i>
                            تحميل
                        </a>
                    </div>
                    
                    <!-- يمكنك إضافة المزيد من ملفات التحميل هنا -->

                </div>
            </section>

        </div>
    </main>

    <!-- ==================== FOOTER ==================== -->
    <footer class="footer">
        <div class="container">
            <p class="footer__copy">
                <!-- 🟢 التعديل 17: اسم المالك في التذييل، تم تحويله إلى الإنجليزية -->
                &copy; <span id="year">2024</span> Faroq Elgammal | All Rights Reserved.
            </p>
        </div>
    </footer>

    <!-- جافاسكريبت بسيط لتحديث السنة في التذييل ومنطق مساعد Gemini -->
    <script>
	
	
        document.getElementById('year').textContent = new Date().getFullYear();

        const analysisButton = document.getElementById('generate-analysis');
        const outputContainer = document.getElementById('ai-output');
        const outputText = document.getElementById('output-text');
        
		// --- NEW LIGHTBOX LOGIC ---
        const modal = document.getElementById('image-modal');
        const modalImg = document.getElementById('modal-image');
        const modalCaption = document.getElementById('modal-caption');
        const closeBtn = document.getElementById('modal-close');
        const galleryItems = document.querySelectorAll('.gallery__item');
        
        // 🛠️ عناصر الزوم الجديدة
        const zoomInBtn = document.getElementById('zoom-in-btn');
        const zoomOutBtn = document.getElementById('zoom-out-btn');
        const resetBtn = document.getElementById('reset-btn');

        // 🛠️ متغييرات الزوم والتحريك الجديدة (من الكود الأحدث)
        let state = {
            scale: 1.0,  // عامل التكبير (Zoom factor)
            x: 0,        // إزاحة X (Translation X)
            y: 0,        // إزاحة Y (Translation Y)
            isDragging: false,
            startX: 0,   // موضع الماوس/اللمس عند بدء السحب
            startY: 0    
        };

        // ==================== 1. وظيفة تحديث مظهر الصورة (Rendering) ====================
        function applyTransform() {
            // استخدام translate3d لتفعيل تسريع الأجهزة (Hardware Acceleration)
            // نستخدم state.x و state.y بالإضافة إلى الإزاحة الافتراضية (-50%, -50%) للمركز
            modalImg.style.transform = `translate(calc(-50% + ${state.x}px), calc(-50% + ${state.y}px)) scale(${state.scale})`;
            
            // تحديث حالة الأزرار
            zoomInBtn.disabled = (state.scale >= 5.0);
            zoomOutBtn.disabled = (state.scale <= 1.0);
        }

        // ==================== 2. التحكم في التكبير (Zoom Logic) ====================
        function zoom(direction, event = null) {
            const zoomSpeed = 0.5; // تم زيادته ليكون الفرق محسوساً مع الأزرار
            let newScale = state.scale + (direction * zoomSpeed);
            
            // تحديد حدود التكبير
            if (newScale < 1.0) newScale = 1.0; 
            if (newScale > 5.0) newScale = 5.0;  
            
            const oldScale = state.scale;
            
            // إذا كان التكبير سيتم من خلال عجلة الماوس
            if (event && oldScale > 1.0) {
                // حساب نقطة التكبير حول مؤشر الماوس
                
                // 1. تحديد موقع الماوس بالنسبة للحاوية (Modal)
                const rect = modal.getBoundingClientRect();
                const offsetX = event.clientX - rect.left;
                const offsetY = event.clientY - rect.top;

                // 2. حساب الموضع النسبي للصورة (أين تقع نقطة الماوس على الصورة المكبرة)
                // يتم طرح الإزاحة الحالية (state.x/y) والموقع المركزي (بافتراض 50% من حجم المودال)
                const centerAdjustX = rect.width / 2;
                const centerAdjustY = rect.height / 2;

                const relativeX = (offsetX - centerAdjustX) - state.x;
                const relativeY = (offsetY - centerAdjustY) - state.y;

                // 3. حساب عامل التعديل (Delta)
                const scaleRatio = newScale / oldScale;

                // 4. تطبيق الإزاحة للحفاظ على التركيز على النقطة
                state.x = (offsetX - centerAdjustX) - (relativeX * scaleRatio);
                state.y = (offsetY - centerAdjustY) - (relativeY * scaleRatio);

            }

            state.scale = newScale;

            // عند التصغير إلى 1x، يجب إعادة تعيين الإزاحة (x, y) إلى الصفر
            if (state.scale <= 1.0) {
                state.scale = 1.0;
                state.x = 0;
                state.y = 0;
            }

            applyTransform();
        }
        
        // إعادة تعيين المشاهدة
        function resetView() {
            state.scale = 1.0;
            state.x = 0;
            state.y = 0;
            applyTransform();
        }

        // ==================== 3. التحكم في التحريك (Pan/Drag Logic) ====================

        // دالة بدء السحب (تُنفذ عند الضغط على زر الماوس أو لمس الشاشة)
        function startDrag(clientX, clientY) {
            // لا تبدأ السحب إلا إذا كانت الصورة مكبرة
            if (state.scale > 1.0) {
                state.isDragging = true;
                state.startX = clientX;
                state.startY = clientY;
                modalImg.classList.add('dragging');
            }
        }

        // دالة أثناء السحب (تُنفذ عند تحريك الماوس أو اللمس)
        function handleDrag(clientX, clientY) {
            if (!state.isDragging) return;

            // 1. حساب فرق الحركة (Delta) بين الموضع الحالي والموضع السابق
            const dx = clientX - state.startX;
            const dy = clientY - state.startY;

            // 2. تحديث موضع الصورة الحالي (x, y)
            state.x += dx;
            state.y += dy;

            // 3. تحديث الموضع الأولي للنقطة للسحب التالي
            state.startX = clientX;
            state.startY = clientY;

            // 4. تطبيق التحويل الجديد (التحريك)
            applyTransform();
        }

        // دالة إنهاء السحب (تُنفذ عند تحرير زر الماوس أو رفع الإصبع)
        function endDrag() {
            if (state.isDragging) {
                state.isDragging = false;
                modalImg.classList.remove('dragging');
            }
        }
        
        // --- ربط الأحداث ---

        // 1. فتح الصورة عند الضغط على أي عنصر في المعرض
        galleryItems.forEach(item => {
            item.addEventListener('click', () => {
                const img = item.querySelector('img');
                const caption = item.querySelector('.gallery__caption');
                
                resetView(); // إعادة تعيين حالة الزوم قبل فتح صورة جديدة
                
                modal.style.display = "flex";
                modalImg.src = img.src;
                // تحديث النص في أسفل زر التحكم بالزوم
                const captionTextElement = modalCaption.querySelector('.zoom-controls').nextSibling;
                if(captionTextElement) {
                    captionTextElement.textContent = caption ? caption.textContent : img.alt;
                } else {
                    // إذا لم يكن هناك عنصر نصي، قم بإضافته بعد عناصر التحكم
                    const newCaptionText = document.createElement('p');
                    newCaptionText.textContent = caption ? caption.textContent : img.alt;
                    modalCaption.appendChild(newCaptionText);
                }
            });
        });

        // 2. إغلاق الصورة عند الضغط على X أو الخلفية
        closeBtn.addEventListener('click', () => {
            modal.style.display = "none";
            resetView();
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = "none";
                resetView();
            }
        });
        
        // 3. معالجة عجلة الماوس (Zoom Wheel)
        modal.addEventListener('wheel', (e) => {
            // منع التمرير الافتراضي للصفحة عند استخدام عجلة الماوس للتكبير
            e.preventDefault(); 
            // تحديد اتجاه التكبير: -1 للتصغير (Zoom Out), 1 للتكبير (Zoom In)
            const direction = e.deltaY < 0 ? 1 : -1;
            zoom(direction, e);
        });

        // 4. ربط أزرار التحكم بالزوم
        zoomInBtn.addEventListener('click', () => zoom(1));
        zoomOutBtn.addEventListener('click', () => zoom(-1));
        resetBtn.addEventListener('click', resetView);
        
        // 5. ربط أحداث الماوس للتحريك (Pan)
        modalImg.addEventListener('mousedown', (e) => startDrag(e.clientX, e.clientY));
        
        // نربط أحداث الحركة والانتهاء بـ 'document' لضمان استمرار السحب حتى لو خرج الماوس من منطقة الصورة
        document.addEventListener('mousemove', (e) => handleDrag(e.clientX, e.clientY));
        document.addEventListener('mouseup', endDrag);

        // 6. ربط أحداث اللمس (Touch) للأجهزة المحمولة
        modalImg.addEventListener('touchstart', (e) => {
            e.preventDefault(); 
            startDrag(e.touches[0].clientX, e.touches[0].clientY);
        });

        document.addEventListener('touchmove', (e) => {
            if (state.isDragging) {
                e.preventDefault(); 
                handleDrag(e.touches[0].clientX, e.touches[0].clientY);
            }
        });
        
        document.addEventListener('touchend', endDrag);

        // --- END LIGHTBOX LOGIC ---


        // --- Gemini API Configuration ---
        const apiKey = "AIzaSyBUqdtsusJFLJ9vWuTwC478vsv1XA55L7Y"; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        // Utility function for exponential backoff retry logic
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) {
                        throw error;
                    }
                }
            }
        }

        analysisButton.addEventListener('click', async () => {
            analysisButton.disabled = true;
            
            outputContainer.removeAttribute('hidden'); 
            outputContainer.classList.remove('empty'); 

            outputText.innerHTML = '<span class="loading__message">جاري تقييم وتحليل هيكلية المشروع... قد يستغرق الأمر بضع ثوانٍ.</span>';

            const systemPrompt = "You are a Senior Technical Reviewer specializing in complex engineering projects. Your task is to perform a comprehensive technical analysis of the provided project description, identifying key strengths and areas for technical improvement. Provide a concise report in ARABIC, formatted with two main bulleted sections: 'نقاط القوة الرئيسية' (Key Strengths) and 'فرص التحسين والتطوير' (Opportunities for Improvement and Development). Do not include any introductory or concluding sentences. Only provide the structured list.";
            
            const projectTitle = document.querySelector('.project__header h1').textContent;
            const projectDescription = document.querySelector('.details__text').textContent.trim().replace(/\s+/g, ' ');

            const userQuery = `Project Title: ${projectTitle}. Description: ${projectDescription}. Based on these details, generate a general analysis report covering 2 key strengths and 2 areas for technical improvement.`;


            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            };

            try {
                const response = await fetchWithRetry(apiUrl, options);
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "عذراً، لم نتمكن من توليد التحليل. يرجى المحاولة مرة أخرى.";
                
                const formattedText = `<h4>تقرير تقييم وتحليل المشروع المقترح من Gemini:</h4>${text}`;
                outputText.innerHTML = formattedText.replace(/\n/g, '<br>');

            } catch (error) {
                console.error("Gemini API Error:", error);
                outputText.innerHTML = "<h4>حدث خطأ:</h4> <p>فشل في الاتصال بمساعد Gemini أو تحليل البيانات.</p>";
                
                outputContainer.classList.add('empty');
                outputContainer.setAttribute('hidden', ''); 
            } finally {
                analysisButton.disabled = false;
            }
        });
    </script>
</body>
</html>
